From 3dc2173923b9df9038203763ca8d32864fd9f18d Mon Sep 17 00:00:00 2001
From: Uri Goldshtein <uri.goldshtein@gmail.com>
Date: Sun, 27 Sep 2015 14:18:50 +0300
Subject: [PATCH 01/39] Step 1: Run `meteor create`

---
 .meteor/.finished-upgraders | 12 +++++++++
 .meteor/.gitignore          |  1 +
 .meteor/.id                 |  7 +++++
 .meteor/packages            | 20 ++++++++++++++
 .meteor/platforms           |  2 ++
 .meteor/release             |  1 +
 .meteor/versions            | 66 +++++++++++++++++++++++++++++++++++++++++++++
 simple-todos-angular.css    |  1 +
 simple-todos-angular.html   | 14 ++++++++++
 simple-todos-angular.js     | 23 ++++++++++++++++
 10 files changed, 147 insertions(+)
 create mode 100644 .meteor/.finished-upgraders
 create mode 100644 .meteor/.gitignore
 create mode 100644 .meteor/.id
 create mode 100644 .meteor/packages
 create mode 100644 .meteor/platforms
 create mode 100644 .meteor/release
 create mode 100644 .meteor/versions
 create mode 100644 simple-todos-angular.css
 create mode 100644 simple-todos-angular.html
 create mode 100644 simple-todos-angular.js

diff --git a/.meteor/.finished-upgraders b/.meteor/.finished-upgraders
new file mode 100644
index 0000000..61ee313
--- /dev/null
+++ b/.meteor/.finished-upgraders
@@ -0,0 +1,12 @@
+# This file contains information which helps Meteor properly upgrade your
+# app when you run 'meteor update'. You should check it into version control
+# with your project.
+
+notices-for-0.9.0
+notices-for-0.9.1
+0.9.4-platform-file
+notices-for-facebook-graph-api-2
+1.2.0-standard-minifiers-package
+1.2.0-meteor-platform-split
+1.2.0-cordova-changes
+1.2.0-breaking-changes
diff --git a/.meteor/.gitignore b/.meteor/.gitignore
new file mode 100644
index 0000000..4083037
--- /dev/null
+++ b/.meteor/.gitignore
@@ -0,0 +1 @@
+local
diff --git a/.meteor/.id b/.meteor/.id
new file mode 100644
index 0000000..fef25df
--- /dev/null
+++ b/.meteor/.id
@@ -0,0 +1,7 @@
+# This file contains a token that is unique to your project.
+# Check it into your repository along with the rest of this directory.
+# It can be used for purposes such as:
+#   - ensuring you don't accidentally deploy one app on top of another
+#   - providing package authors with aggregated statistics
+
+1szqmjtlgnfrb1a0907w
diff --git a/.meteor/packages b/.meteor/packages
new file mode 100644
index 0000000..a9f8340
--- /dev/null
+++ b/.meteor/packages
@@ -0,0 +1,20 @@
+# Meteor packages used by this project, one per line.
+# Check this file (and the other files in this directory) into your repository.
+#
+# 'meteor add' and 'meteor remove' will edit this file for you,
+# but you can also edit it by hand.
+
+meteor-base             # Packages every Meteor app needs to have
+mobile-experience       # Packages for a great mobile UX
+mongo                   # The database Meteor supports right now
+blaze-html-templates    # Compile .html files into Meteor Blaze views
+session                 # Client-side reactive dictionary for your app
+jquery                  # Helpful client-side library
+tracker                 # Meteor's client-side reactive programming library
+
+standard-minifiers      # JS/CSS minifiers run for production mode
+es5-shim                # ECMAScript 5 compatibility for older browsers.
+ecmascript              # Enable ECMAScript2015+ syntax in app code
+
+autopublish             # Publish all data to the clients (for prototyping)
+insecure                # Allow all DB writes from clients (for prototyping)
diff --git a/.meteor/platforms b/.meteor/platforms
new file mode 100644
index 0000000..efeba1b
--- /dev/null
+++ b/.meteor/platforms
@@ -0,0 +1,2 @@
+server
+browser
diff --git a/.meteor/release b/.meteor/release
new file mode 100644
index 0000000..238bbcc
--- /dev/null
+++ b/.meteor/release
@@ -0,0 +1 @@
+METEOR@1.2.0.1
diff --git a/.meteor/versions b/.meteor/versions
new file mode 100644
index 0000000..e378b68
--- /dev/null
+++ b/.meteor/versions
@@ -0,0 +1,66 @@
+autopublish@1.0.4
+autoupdate@1.2.3
+babel-compiler@5.8.24_1
+babel-runtime@0.1.4
+base64@1.0.4
+binary-heap@1.0.4
+blaze@2.1.3
+blaze-html-templates@1.0.1
+blaze-tools@1.0.4
+boilerplate-generator@1.0.4
+caching-compiler@1.0.0
+caching-html-compiler@1.0.1
+callback-hook@1.0.4
+check@1.0.6
+ddp@1.2.2
+ddp-client@1.2.1
+ddp-common@1.2.1
+ddp-server@1.2.1
+deps@1.0.9
+diff-sequence@1.0.1
+ecmascript@0.1.4
+ecmascript-collections@0.1.6
+ejson@1.0.7
+es5-shim@4.1.13
+fastclick@1.0.7
+geojson-utils@1.0.4
+hot-code-push@1.0.0
+html-tools@1.0.5
+htmljs@1.0.5
+http@1.1.1
+id-map@1.0.4
+insecure@1.0.4
+jquery@1.11.4
+launch-screen@1.0.4
+livedata@1.0.15
+logging@1.0.8
+meteor@1.1.7
+meteor-base@1.0.1
+minifiers@1.1.7
+minimongo@1.0.9
+mobile-experience@1.0.1
+mobile-status-bar@1.0.6
+mongo@1.1.1
+mongo-id@1.0.1
+npm-mongo@1.4.39_1
+observe-sequence@1.0.7
+ordered-dict@1.0.4
+promise@0.4.8
+random@1.0.4
+reactive-dict@1.1.1
+reactive-var@1.0.6
+reload@1.1.4
+retry@1.0.4
+routepolicy@1.0.6
+session@1.1.1
+spacebars@1.0.7
+spacebars-compiler@1.0.7
+standard-minifiers@1.0.0
+templating@1.1.3
+templating-tools@1.0.0
+tracker@1.0.8
+ui@1.0.8
+underscore@1.0.4
+url@1.0.5
+webapp@1.2.2
+webapp-hashing@1.0.5
diff --git a/simple-todos-angular.css b/simple-todos-angular.css
new file mode 100644
index 0000000..b6b4052
--- /dev/null
+++ b/simple-todos-angular.css
@@ -0,0 +1 @@
+/* CSS declarations go here */
diff --git a/simple-todos-angular.html b/simple-todos-angular.html
new file mode 100644
index 0000000..30ca9b0
--- /dev/null
+++ b/simple-todos-angular.html
@@ -0,0 +1,14 @@
+<head>
+  <title>simple-todos-angular</title>
+</head>
+
+<body>
+  <h1>Welcome to Meteor!</h1>
+
+  {{> hello}}
+</body>
+
+<template name="hello">
+  <button>Click Me</button>
+  <p>You've pressed the button {{counter}} times.</p>
+</template>
diff --git a/simple-todos-angular.js b/simple-todos-angular.js
new file mode 100644
index 0000000..4f8c65d
--- /dev/null
+++ b/simple-todos-angular.js
@@ -0,0 +1,23 @@
+if (Meteor.isClient) {
+  // counter starts at 0
+  Session.setDefault('counter', 0);
+
+  Template.hello.helpers({
+    counter: function () {
+      return Session.get('counter');
+    }
+  });
+
+  Template.hello.events({
+    'click button': function () {
+      // increment the counter when button is clicked
+      Session.set('counter', Session.get('counter') + 1);
+    }
+  });
+}
+
+if (Meteor.isServer) {
+  Meteor.startup(function () {
+    // code to run on server at startup
+  });
+}
-- 
2.6.3


From 54b4fc3cc09f1071b204d2a722a9aa43df0e4a9e Mon Sep 17 00:00:00 2001
From: Uri Goldshtein <uri.goldshtein@gmail.com>
Date: Sun, 8 Nov 2015 02:32:52 +0200
Subject: [PATCH 02/39] Step 2.1: Remove blaze-html-templates and ecmascript
 package and add angular

---
 .meteor/packages |  3 +--
 .meteor/release  |  2 +-
 .meteor/versions | 43 ++++++++++++++++++++++++-------------------
 3 files changed, 26 insertions(+), 22 deletions(-)

diff --git a/.meteor/packages b/.meteor/packages
index a9f8340..7082732 100644
--- a/.meteor/packages
+++ b/.meteor/packages
@@ -7,14 +7,13 @@
 meteor-base             # Packages every Meteor app needs to have
 mobile-experience       # Packages for a great mobile UX
 mongo                   # The database Meteor supports right now
-blaze-html-templates    # Compile .html files into Meteor Blaze views
 session                 # Client-side reactive dictionary for your app
 jquery                  # Helpful client-side library
 tracker                 # Meteor's client-side reactive programming library
 
 standard-minifiers      # JS/CSS minifiers run for production mode
 es5-shim                # ECMAScript 5 compatibility for older browsers.
-ecmascript              # Enable ECMAScript2015+ syntax in app code
 
 autopublish             # Publish all data to the clients (for prototyping)
 insecure                # Allow all DB writes from clients (for prototyping)
+angular@1.2.0-rc.6
diff --git a/.meteor/release b/.meteor/release
index 238bbcc..3a05e0a 100644
--- a/.meteor/release
+++ b/.meteor/release
@@ -1 +1 @@
-METEOR@1.2.0.1
+METEOR@1.2.1
diff --git a/.meteor/versions b/.meteor/versions
index e378b68..4a7a39b 100644
--- a/.meteor/versions
+++ b/.meteor/versions
@@ -1,27 +1,31 @@
+angular@1.2.0-rc.6
+angular-meteor-data@0.0.4
+angular-templates@0.0.1
+angular:angular@1.4.7
 autopublish@1.0.4
-autoupdate@1.2.3
+autoupdate@1.2.4
 babel-compiler@5.8.24_1
 babel-runtime@0.1.4
 base64@1.0.4
 binary-heap@1.0.4
 blaze@2.1.3
-blaze-html-templates@1.0.1
 blaze-tools@1.0.4
 boilerplate-generator@1.0.4
 caching-compiler@1.0.0
-caching-html-compiler@1.0.1
+caching-html-compiler@1.0.2
 callback-hook@1.0.4
-check@1.0.6
+check@1.1.0
+dburles:mongo-collection-instances@0.3.4
 ddp@1.2.2
 ddp-client@1.2.1
-ddp-common@1.2.1
-ddp-server@1.2.1
+ddp-common@1.2.2
+ddp-server@1.2.2
 deps@1.0.9
 diff-sequence@1.0.1
-ecmascript@0.1.4
-ecmascript-collections@0.1.6
+ecmascript@0.1.6
+ecmascript-runtime@0.2.6
 ejson@1.0.7
-es5-shim@4.1.13
+es5-shim@4.1.14
 fastclick@1.0.7
 geojson-utils@1.0.4
 hot-code-push@1.0.0
@@ -31,23 +35,25 @@ http@1.1.1
 id-map@1.0.4
 insecure@1.0.4
 jquery@1.11.4
+lai:collection-extensions@0.1.4
 launch-screen@1.0.4
 livedata@1.0.15
 logging@1.0.8
-meteor@1.1.7
+meteor@1.1.10
 meteor-base@1.0.1
 minifiers@1.1.7
-minimongo@1.0.9
+minimongo@1.0.10
 mobile-experience@1.0.1
 mobile-status-bar@1.0.6
-mongo@1.1.1
+mongo@1.1.3
 mongo-id@1.0.1
 npm-mongo@1.4.39_1
 observe-sequence@1.0.7
 ordered-dict@1.0.4
-promise@0.4.8
-random@1.0.4
-reactive-dict@1.1.1
+pbastowski:angular-babel@1.0.2
+promise@0.5.1
+random@1.0.5
+reactive-dict@1.1.3
 reactive-var@1.0.6
 reload@1.1.4
 retry@1.0.4
@@ -55,12 +61,11 @@ routepolicy@1.0.6
 session@1.1.1
 spacebars@1.0.7
 spacebars-compiler@1.0.7
-standard-minifiers@1.0.0
-templating@1.1.3
+standard-minifiers@1.0.2
 templating-tools@1.0.0
-tracker@1.0.8
+tracker@1.0.9
 ui@1.0.8
 underscore@1.0.4
 url@1.0.5
-webapp@1.2.2
+webapp@1.2.3
 webapp-hashing@1.0.5
-- 
2.6.3


From 6fb657fa7f9189200a1725c8b8d9e261fc65dba0 Mon Sep 17 00:00:00 2001
From: Uri Goldshtein <uri.goldshtein@gmail.com>
Date: Sun, 8 Nov 2015 02:36:49 +0200
Subject: [PATCH 03/39] Step 2.2: Add Angular app and controller to HTML

---
 simple-todos-angular.html | 16 ++++++----------
 1 file changed, 6 insertions(+), 10 deletions(-)

diff --git a/simple-todos-angular.html b/simple-todos-angular.html
index 30ca9b0..1167ed1 100644
--- a/simple-todos-angular.html
+++ b/simple-todos-angular.html
@@ -1,14 +1,10 @@
 <head>
-  <title>simple-todos-angular</title>
+  <title>Todo List</title>
 </head>
 
 <body>
-  <h1>Welcome to Meteor!</h1>
-
-  {{> hello}}
-</body>
-
-<template name="hello">
-  <button>Click Me</button>
-  <p>You've pressed the button {{counter}} times.</p>
-</template>
+<div class="container"
+     ng-app="simple-todos"
+     ng-controller="TodosListCtrl">
+</div>
+</body>
\ No newline at end of file
-- 
2.6.3


From 536a1e25561a9bd9e243e820144d2dc3b271ee62 Mon Sep 17 00:00:00 2001
From: Uri Goldshtein <uri.goldshtein@gmail.com>
Date: Sat, 18 Jul 2015 12:46:44 +0300
Subject: [PATCH 04/39] Step 2.3: Init Angular app and controller

---
 simple-todos-angular.js | 29 +++++++++++------------------
 1 file changed, 11 insertions(+), 18 deletions(-)

diff --git a/simple-todos-angular.js b/simple-todos-angular.js
index 4f8c65d..fa676f2 100644
--- a/simple-todos-angular.js
+++ b/simple-todos-angular.js
@@ -1,23 +1,16 @@
 if (Meteor.isClient) {
-  // counter starts at 0
-  Session.setDefault('counter', 0);
 
-  Template.hello.helpers({
-    counter: function () {
-      return Session.get('counter');
-    }
-  });
+  // This code only runs on the client
+  angular.module('simple-todos',['angular-meteor']);
 
-  Template.hello.events({
-    'click button': function () {
-      // increment the counter when button is clicked
-      Session.set('counter', Session.get('counter') + 1);
-    }
-  });
-}
+  angular.module('simple-todos').controller('TodosListCtrl', ['$scope',
+    function ($scope) {
+
+      $scope.tasks = [
+        { text: 'This is task 1' },
+        { text: 'This is task 2' },
+        { text: 'This is task 3' }
+      ];
 
-if (Meteor.isServer) {
-  Meteor.startup(function () {
-    // code to run on server at startup
-  });
+  }]);
 }
-- 
2.6.3


From af67f32ed8e1a7a50111ca06aa7a492288c5d458 Mon Sep 17 00:00:00 2001
From: Uri Goldshtein <uri.goldshtein@gmail.com>
Date: Sun, 8 Nov 2015 02:40:20 +0200
Subject: [PATCH 05/39] Step 2.4: Add Angular list to template

---
 simple-todos-angular.html | 9 +++++++++
 1 file changed, 9 insertions(+)

diff --git a/simple-todos-angular.html b/simple-todos-angular.html
index 1167ed1..6c3ebe6 100644
--- a/simple-todos-angular.html
+++ b/simple-todos-angular.html
@@ -6,5 +6,14 @@
 <div class="container"
      ng-app="simple-todos"
      ng-controller="TodosListCtrl">
+
+  <header>
+    <h1>Todo List</h1>
+  </header>
+
+  <ul>
+    <li ng-repeat="task in tasks">{{task.text}}</li>
+  </ul>
+
 </div>
 </body>
\ No newline at end of file
-- 
2.6.3


From f7b3c6756898b1909e11dbf76a00669778f202ed Mon Sep 17 00:00:00 2001
From: Uri Goldshtein <uri.goldshtein@gmail.com>
Date: Sat, 18 Jul 2015 12:50:26 +0300
Subject: [PATCH 06/39] Step 2.5: Add CSS

---
 simple-todos-angular.css | 126 +++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 126 insertions(+)

diff --git a/simple-todos-angular.css b/simple-todos-angular.css
index b6b4052..0bca5d2 100644
--- a/simple-todos-angular.css
+++ b/simple-todos-angular.css
@@ -1 +1,127 @@
 /* CSS declarations go here */
+body {
+  font-family: sans-serif;
+  background-color: #315481;
+  background-image: linear-gradient(to bottom, #315481, #918e82 100%);
+  background-attachment: fixed;
+
+  position: absolute;
+  top: 0;
+  bottom: 0;
+  left: 0;
+  right: 0;
+
+  padding: 0;
+  margin: 0;
+
+  font-size: 14px;
+}
+
+.container {
+  max-width: 600px;
+  margin: 0 auto;
+  min-height: 100%;
+  background: white;
+}
+
+header {
+  background: #d2edf4;
+  background-image: linear-gradient(to bottom, #d0edf5, #e1e5f0 100%);
+  padding: 20px 15px 15px 15px;
+  position: relative;
+}
+
+#login-buttons {
+  display: block;
+}
+
+h1 {
+  font-size: 1.5em;
+  margin: 0;
+  margin-bottom: 10px;
+  display: inline-block;
+  margin-right: 1em;
+}
+
+form {
+  margin-top: 10px;
+  margin-bottom: -10px;
+  position: relative;
+}
+
+.new-task input {
+  box-sizing: border-box;
+  padding: 10px 0;
+  background: transparent;
+  border: none;
+  width: 100%;
+  padding-right: 80px;
+  font-size: 1em;
+}
+
+.new-task input:focus{
+  outline: 0;
+}
+
+ul {
+  margin: 0;
+  padding: 0;
+  background: white;
+}
+
+.delete {
+  float: right;
+  font-weight: bold;
+  background: none;
+  font-size: 1em;
+  border: none;
+  position: relative;
+}
+
+li {
+  position: relative;
+  list-style: none;
+  padding: 15px;
+  border-bottom: #eee solid 1px;
+}
+
+li .text {
+  margin-left: 10px;
+}
+
+li.checked {
+  color: #888;
+}
+
+li.checked .text {
+  text-decoration: line-through;
+}
+
+li.private {
+  background: #eee;
+  border-color: #ddd;
+}
+
+header .hide-completed {
+  float: right;
+}
+
+.toggle-private {
+  margin-left: 5px;
+}
+
+@media (max-width: 600px) {
+  li {
+    padding: 12px 15px;
+  }
+
+  .search {
+    width: 150px;
+    clear: both;
+  }
+
+  .new-task input {
+    padding-bottom: 5px;
+  }
+}
+
-- 
2.6.3


From bd137585ec3e93383f3d85d7549fc3b6ece59e1d Mon Sep 17 00:00:00 2001
From: Uri Goldshtein <uri.goldshtein@gmail.com>
Date: Sat, 18 Jul 2015 12:56:31 +0300
Subject: [PATCH 07/39] Step 3.1: Replace the static array with a Collection

---
 simple-todos-angular.js | 14 ++++++--------
 1 file changed, 6 insertions(+), 8 deletions(-)

diff --git a/simple-todos-angular.js b/simple-todos-angular.js
index fa676f2..9a9b236 100644
--- a/simple-todos-angular.js
+++ b/simple-todos-angular.js
@@ -1,16 +1,14 @@
+Tasks = new Mongo.Collection('tasks');
+
 if (Meteor.isClient) {
 
   // This code only runs on the client
   angular.module('simple-todos',['angular-meteor']);
 
-  angular.module('simple-todos').controller('TodosListCtrl', ['$scope',
-    function ($scope) {
+  angular.module('simple-todos').controller('TodosListCtrl', ['$scope', '$meteor',
+    function ($scope, $meteor) {
 
-      $scope.tasks = [
-        { text: 'This is task 1' },
-        { text: 'This is task 2' },
-        { text: 'This is task 3' }
-      ];
+      $scope.tasks = $meteor.collection(Tasks);
 
-  }]);
+    }]);
 }
-- 
2.6.3


From 051ed54c2a220f8c344ab2e9d8c878facb54bb0c Mon Sep 17 00:00:00 2001
From: Uri Goldshtein <uri.goldshtein@gmail.com>
Date: Sun, 8 Nov 2015 02:44:38 +0200
Subject: [PATCH 08/39] Step 4.1: Add new task form to template

---
 simple-todos-angular.html | 7 +++++++
 1 file changed, 7 insertions(+)

diff --git a/simple-todos-angular.html b/simple-todos-angular.html
index 6c3ebe6..ef1a923 100644
--- a/simple-todos-angular.html
+++ b/simple-todos-angular.html
@@ -9,6 +9,13 @@
 
   <header>
     <h1>Todo List</h1>
+
+    <!-- add a form below the h1 -->
+    <form class="new-task" ng-submit="addTask(newTask); newTask='';">
+      <input ng-model="newTask" type="text"
+             name="text" placeholder="Type to add new tasks" />
+    </form>
+
   </header>
 
   <ul>
-- 
2.6.3


From b4bbb697c0147ba71087b5e4260f32f513d3390c Mon Sep 17 00:00:00 2001
From: Uri Goldshtein <uri.goldshtein@gmail.com>
Date: Sat, 18 Jul 2015 13:00:30 +0300
Subject: [PATCH 09/39] Step 4.2: Create Add Task scope function

---
 simple-todos-angular.js | 7 +++++++
 1 file changed, 7 insertions(+)

diff --git a/simple-todos-angular.js b/simple-todos-angular.js
index 9a9b236..e9dc878 100644
--- a/simple-todos-angular.js
+++ b/simple-todos-angular.js
@@ -10,5 +10,12 @@ if (Meteor.isClient) {
 
       $scope.tasks = $meteor.collection(Tasks);
 
+      $scope.addTask = function (newTask) {
+        $scope.tasks.push( {
+          text: newTask,
+          createdAt: new Date() }
+        );
+      };
+
     }]);
 }
-- 
2.6.3


From 5528d73545bfb1381b2dc21313e3ad32cd40401f Mon Sep 17 00:00:00 2001
From: Uri Goldshtein <uri.goldshtein@gmail.com>
Date: Sat, 18 Jul 2015 13:01:36 +0300
Subject: [PATCH 10/39] Step 4.3: Sort task list by date

---
 simple-todos-angular.js | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/simple-todos-angular.js b/simple-todos-angular.js
index e9dc878..36ab6d1 100644
--- a/simple-todos-angular.js
+++ b/simple-todos-angular.js
@@ -8,7 +8,9 @@ if (Meteor.isClient) {
   angular.module('simple-todos').controller('TodosListCtrl', ['$scope', '$meteor',
     function ($scope, $meteor) {
 
-      $scope.tasks = $meteor.collection(Tasks);
+      $scope.tasks = $meteor.collection( function() {
+        return Tasks.find({}, { sort: { createdAt: -1 } })
+      });
 
       $scope.addTask = function (newTask) {
         $scope.tasks.push( {
-- 
2.6.3


From 60ba697f05f60f9e8f021ef0fe05effcb0f52fc0 Mon Sep 17 00:00:00 2001
From: Uri Goldshtein <uri.goldshtein@gmail.com>
Date: Sun, 8 Nov 2015 02:46:11 +0200
Subject: [PATCH 11/39] Step 5.1: Add done and delete buttons to task

---
 simple-todos-angular.html | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

diff --git a/simple-todos-angular.html b/simple-todos-angular.html
index ef1a923..54765ef 100644
--- a/simple-todos-angular.html
+++ b/simple-todos-angular.html
@@ -19,7 +19,13 @@
   </header>
 
   <ul>
-    <li ng-repeat="task in tasks">{{task.text}}</li>
+    <li ng-repeat="task in tasks" ng-class="{'checked': task.checked}">
+      <button class="delete" ng-click="tasks.remove(task)">&times;</button>
+
+      <input type="checkbox" ng-model="task.checked" class="toggle-checked" />
+
+      <span class="text">{{task.text}}</span>
+    </li>
   </ul>
 
 </div>
-- 
2.6.3


From 3d28d1c4a755457028cf54d9b280970e34ee6a9d Mon Sep 17 00:00:00 2001
From: Uri Goldshtein <uri.goldshtein@gmail.com>
Date: Sun, 8 Nov 2015 02:47:17 +0200
Subject: [PATCH 12/39] Step 6.1: Remove ng-app

---
 simple-todos-angular.html | 1 -
 1 file changed, 1 deletion(-)

diff --git a/simple-todos-angular.html b/simple-todos-angular.html
index 54765ef..364fc82 100644
--- a/simple-todos-angular.html
+++ b/simple-todos-angular.html
@@ -4,7 +4,6 @@
 
 <body>
 <div class="container"
-     ng-app="simple-todos"
      ng-controller="TodosListCtrl">
 
   <header>
-- 
2.6.3


From 99d00a58c6dceb7054043c15e9bb6d47f4cf500b Mon Sep 17 00:00:00 2001
From: Uri Goldshtein <uri.goldshtein@gmail.com>
Date: Sat, 18 Jul 2015 13:11:07 +0300
Subject: [PATCH 13/39] Step 6.2: Bootstrap Angular to mobile as well

---
 simple-todos-angular.js | 9 +++++++++
 1 file changed, 9 insertions(+)

diff --git a/simple-todos-angular.js b/simple-todos-angular.js
index 36ab6d1..b002918 100644
--- a/simple-todos-angular.js
+++ b/simple-todos-angular.js
@@ -5,6 +5,15 @@ if (Meteor.isClient) {
   // This code only runs on the client
   angular.module('simple-todos',['angular-meteor']);
 
+  function onReady() {
+    angular.bootstrap(document, ['simple-todos']);
+  }
+
+  if (Meteor.isCordova)
+    angular.element(document).on('deviceready', onReady);
+  else
+    angular.element(document).ready(onReady);
+
   angular.module('simple-todos').controller('TodosListCtrl', ['$scope', '$meteor',
     function ($scope, $meteor) {
 
-- 
2.6.3


From 433b7279aa5a10f07dbbe635575429007cb93197 Mon Sep 17 00:00:00 2001
From: Uri Goldshtein <uri.goldshtein@gmail.com>
Date: Sun, 8 Nov 2015 02:48:18 +0200
Subject: [PATCH 14/39] Step 7.1: Add hideComplete checkbox to template

---
 simple-todos-angular.html | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/simple-todos-angular.html b/simple-todos-angular.html
index 364fc82..e03d952 100644
--- a/simple-todos-angular.html
+++ b/simple-todos-angular.html
@@ -9,6 +9,11 @@
   <header>
     <h1>Todo List</h1>
 
+    <label class="hide-completed">
+      <input type="checkbox" ng-model="hideCompleted"/>
+      Hide Completed Tasks
+    </label>
+
     <!-- add a form below the h1 -->
     <form class="new-task" ng-submit="addTask(newTask); newTask='';">
       <input ng-model="newTask" type="text"
-- 
2.6.3


From a7861762653c318041327988ce19491585a179ef Mon Sep 17 00:00:00 2001
From: Uri Goldshtein <uri.goldshtein@gmail.com>
Date: Sat, 18 Jul 2015 13:14:54 +0300
Subject: [PATCH 15/39] Step 7.2: Watch hideCompleted and change the query
 variable

---
 simple-todos-angular.js | 7 +++++++
 1 file changed, 7 insertions(+)

diff --git a/simple-todos-angular.js b/simple-todos-angular.js
index b002918..e759172 100644
--- a/simple-todos-angular.js
+++ b/simple-todos-angular.js
@@ -28,5 +28,12 @@ if (Meteor.isClient) {
         );
       };
 
+      $scope.$watch('hideCompleted', function() {
+        if ($scope.hideCompleted)
+          $scope.query = {checked: {$ne: true}};
+        else
+          $scope.query = {};
+      });
+
     }]);
 }
-- 
2.6.3


From 27fa922779779c3776c7f4a225e16bca00f70c18 Mon Sep 17 00:00:00 2001
From: Uri Goldshtein <uri.goldshtein@gmail.com>
Date: Sat, 18 Jul 2015 13:17:07 +0300
Subject: [PATCH 16/39] Step 7.3: Change the Collection to use query parameter

---
 simple-todos-angular.js | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/simple-todos-angular.js b/simple-todos-angular.js
index e759172..071be1f 100644
--- a/simple-todos-angular.js
+++ b/simple-todos-angular.js
@@ -17,8 +17,8 @@ if (Meteor.isClient) {
   angular.module('simple-todos').controller('TodosListCtrl', ['$scope', '$meteor',
     function ($scope, $meteor) {
 
-      $scope.tasks = $meteor.collection( function() {
-        return Tasks.find({}, { sort: { createdAt: -1 } })
+      $scope.tasks = $meteor.collection(function() {
+        return Tasks.find($scope.query, {sort: {createdAt: -1}})
       });
 
       $scope.addTask = function (newTask) {
-- 
2.6.3


From bd6b3849890abf633b3ed6e1b456ee691dca31f6 Mon Sep 17 00:00:00 2001
From: Uri Goldshtein <uri.goldshtein@gmail.com>
Date: Sat, 18 Jul 2015 13:17:59 +0300
Subject: [PATCH 17/39] Step 7.4: Make query parameter reactive

---
 simple-todos-angular.js | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/simple-todos-angular.js b/simple-todos-angular.js
index 071be1f..24c55fa 100644
--- a/simple-todos-angular.js
+++ b/simple-todos-angular.js
@@ -18,7 +18,7 @@ if (Meteor.isClient) {
     function ($scope, $meteor) {
 
       $scope.tasks = $meteor.collection(function() {
-        return Tasks.find($scope.query, {sort: {createdAt: -1}})
+        return Tasks.find($scope.getReactively('query'), {sort: {createdAt: -1}})
       });
 
       $scope.addTask = function (newTask) {
-- 
2.6.3


From 3350971e0f768549142da190144eb5cafdef500c Mon Sep 17 00:00:00 2001
From: Uri Goldshtein <uri.goldshtein@gmail.com>
Date: Sat, 18 Jul 2015 13:19:38 +0300
Subject: [PATCH 18/39] Step 7.5: Add incompleteCount to scope

---
 simple-todos-angular.js | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/simple-todos-angular.js b/simple-todos-angular.js
index 24c55fa..5934036 100644
--- a/simple-todos-angular.js
+++ b/simple-todos-angular.js
@@ -35,5 +35,9 @@ if (Meteor.isClient) {
           $scope.query = {};
       });
 
+      $scope.incompleteCount = function () {
+        return Tasks.find({ checked: {$ne: true} }).count();
+      };
+
     }]);
 }
-- 
2.6.3


From 0298bed3c151c9a003074c90dedfe1c93a21fc05 Mon Sep 17 00:00:00 2001
From: Uri Goldshtein <uri.goldshtein@gmail.com>
Date: Sun, 8 Nov 2015 02:51:49 +0200
Subject: [PATCH 19/39] Step 7.6: Add incompleteCount to header

---
 simple-todos-angular.html | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/simple-todos-angular.html b/simple-todos-angular.html
index e03d952..ef5bc59 100644
--- a/simple-todos-angular.html
+++ b/simple-todos-angular.html
@@ -7,7 +7,7 @@
      ng-controller="TodosListCtrl">
 
   <header>
-    <h1>Todo List</h1>
+    <h1>Todo List ( {{ incompleteCount() }} )</h1>
 
     <label class="hide-completed">
       <input type="checkbox" ng-model="hideCompleted"/>
-- 
2.6.3


From c030d9b61a75a96d98ccaa90dce71cc1396f3d60 Mon Sep 17 00:00:00 2001
From: Uri Goldshtein <uri.goldshtein@gmail.com>
Date: Mon, 9 Nov 2015 11:41:07 +0200
Subject: [PATCH 20/39] Step 8.1: Add accounts-password and
 dotansimha:accounts-ui-angular packages

---
 .meteor/packages |  2 ++
 .meteor/versions | 16 ++++++++++++++++
 2 files changed, 18 insertions(+)

diff --git a/.meteor/packages b/.meteor/packages
index 7082732..dbee131 100644
--- a/.meteor/packages
+++ b/.meteor/packages
@@ -17,3 +17,5 @@ es5-shim                # ECMAScript 5 compatibility for older browsers.
 autopublish             # Publish all data to the clients (for prototyping)
 insecure                # Allow all DB writes from clients (for prototyping)
 angular@1.2.0-rc.6
+accounts-password
+dotansimha:accounts-ui-angular
diff --git a/.meteor/versions b/.meteor/versions
index 4a7a39b..cf8e714 100644
--- a/.meteor/versions
+++ b/.meteor/versions
@@ -1,3 +1,7 @@
+accounts-base@1.2.2
+accounts-password@1.1.4
+accounts-ui@1.1.6
+accounts-ui-unstyled@1.1.8
 angular@1.2.0-rc.6
 angular-meteor-data@0.0.4
 angular-templates@0.0.1
@@ -9,6 +13,7 @@ babel-runtime@0.1.4
 base64@1.0.4
 binary-heap@1.0.4
 blaze@2.1.3
+blaze-html-templates@1.0.1
 blaze-tools@1.0.4
 boilerplate-generator@1.0.4
 caching-compiler@1.0.0
@@ -19,12 +24,15 @@ dburles:mongo-collection-instances@0.3.4
 ddp@1.2.2
 ddp-client@1.2.1
 ddp-common@1.2.2
+ddp-rate-limiter@1.0.0
 ddp-server@1.2.2
 deps@1.0.9
 diff-sequence@1.0.1
+dotansimha:accounts-ui-angular@0.0.1
 ecmascript@0.1.6
 ecmascript-runtime@0.2.6
 ejson@1.0.7
+email@1.0.8
 es5-shim@4.1.14
 fastclick@1.0.7
 geojson-utils@1.0.4
@@ -37,7 +45,9 @@ insecure@1.0.4
 jquery@1.11.4
 lai:collection-extensions@0.1.4
 launch-screen@1.0.4
+less@2.5.1
 livedata@1.0.15
+localstorage@1.0.5
 logging@1.0.8
 meteor@1.1.10
 meteor-base@1.0.1
@@ -47,21 +57,27 @@ mobile-experience@1.0.1
 mobile-status-bar@1.0.6
 mongo@1.1.3
 mongo-id@1.0.1
+npm-bcrypt@0.7.8_2
 npm-mongo@1.4.39_1
 observe-sequence@1.0.7
 ordered-dict@1.0.4
 pbastowski:angular-babel@1.0.2
 promise@0.5.1
 random@1.0.5
+rate-limit@1.0.0
 reactive-dict@1.1.3
 reactive-var@1.0.6
 reload@1.1.4
 retry@1.0.4
 routepolicy@1.0.6
+service-configuration@1.0.5
 session@1.1.1
+sha@1.0.4
 spacebars@1.0.7
 spacebars-compiler@1.0.7
+srp@1.0.4
 standard-minifiers@1.0.2
+templating@1.1.5
 templating-tools@1.0.0
 tracker@1.0.9
 ui@1.0.8
-- 
2.6.3


From d11c7e6703a0fbe3b9d998f05aa882af33daec70 Mon Sep 17 00:00:00 2001
From: Uri Goldshtein <uri.goldshtein@gmail.com>
Date: Mon, 9 Nov 2015 11:46:05 +0200
Subject: [PATCH 21/39] Step 8.2: Add `accounts.ui` dependency to Angular app

---
 simple-todos-angular.js | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/simple-todos-angular.js b/simple-todos-angular.js
index 5934036..7ca4577 100644
--- a/simple-todos-angular.js
+++ b/simple-todos-angular.js
@@ -3,7 +3,7 @@ Tasks = new Mongo.Collection('tasks');
 if (Meteor.isClient) {
 
   // This code only runs on the client
-  angular.module('simple-todos',['angular-meteor']);
+  angular.module('simple-todos',['angular-meteor', 'accounts.ui']);
 
   function onReady() {
     angular.bootstrap(document, ['simple-todos']);
-- 
2.6.3


From 6991ba8819734e10ed159c70b7a56a3f6cb91047 Mon Sep 17 00:00:00 2001
From: Uri Goldshtein <uri.goldshtein@gmail.com>
Date: Mon, 9 Nov 2015 11:54:35 +0200
Subject: [PATCH 22/39] Step 8.3: Add loginButtons directive

---
 simple-todos-angular.html | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/simple-todos-angular.html b/simple-todos-angular.html
index ef5bc59..5fdbfb8 100644
--- a/simple-todos-angular.html
+++ b/simple-todos-angular.html
@@ -14,6 +14,8 @@
       Hide Completed Tasks
     </label>
 
+    <login-buttons></login-buttons>
+
     <!-- add a form below the h1 -->
     <form class="new-task" ng-submit="addTask(newTask); newTask='';">
       <input ng-model="newTask" type="text"
-- 
2.6.3


From c10b140fc33cb5410b052e22a9fd9da477ceb758 Mon Sep 17 00:00:00 2001
From: Uri Goldshtein <uri.goldshtein@gmail.com>
Date: Sat, 18 Jul 2015 13:27:12 +0300
Subject: [PATCH 23/39] Step 8.4: Configure accounts UI to use usernames
 instead of email

---
 simple-todos-angular.js | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/simple-todos-angular.js b/simple-todos-angular.js
index 7ca4577..0b277df 100644
--- a/simple-todos-angular.js
+++ b/simple-todos-angular.js
@@ -2,6 +2,10 @@ Tasks = new Mongo.Collection('tasks');
 
 if (Meteor.isClient) {
 
+  Accounts.ui.config({
+    passwordSignupFields: "USERNAME_ONLY"
+  });
+
   // This code only runs on the client
   angular.module('simple-todos',['angular-meteor', 'accounts.ui']);
 
-- 
2.6.3


From 2e7884368e636e0acb643430e75d1bd1332dbe51 Mon Sep 17 00:00:00 2001
From: Uri Goldshtein <uri.goldshtein@gmail.com>
Date: Sat, 18 Jul 2015 13:29:48 +0300
Subject: [PATCH 24/39] Step 8.5: Add owner and username to created task

---
 simple-todos-angular.js | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

diff --git a/simple-todos-angular.js b/simple-todos-angular.js
index 0b277df..a83dad1 100644
--- a/simple-todos-angular.js
+++ b/simple-todos-angular.js
@@ -25,10 +25,12 @@ if (Meteor.isClient) {
         return Tasks.find($scope.getReactively('query'), {sort: {createdAt: -1}})
       });
 
-      $scope.addTask = function (newTask) {
+      $scope.addTask = function(newTask) {
         $scope.tasks.push( {
-          text: newTask,
-          createdAt: new Date() }
+            text: newTask,
+            createdAt: new Date(),             // current time
+            owner: Meteor.userId(),            // _id of logged in user
+            username: Meteor.user().username }  // username of logged in user
         );
       };
 
-- 
2.6.3


From 18d272c5a582cc0c8edcd3c1cc1cc99360f3d5ca Mon Sep 17 00:00:00 2001
From: Uri Goldshtein <uri.goldshtein@gmail.com>
Date: Sun, 8 Nov 2015 02:55:26 +0200
Subject: [PATCH 25/39] Step 8.6: Hide new task form if user is not logged in

---
 simple-todos-angular.html | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/simple-todos-angular.html b/simple-todos-angular.html
index 5fdbfb8..98c6a82 100644
--- a/simple-todos-angular.html
+++ b/simple-todos-angular.html
@@ -17,7 +17,9 @@
     <login-buttons></login-buttons>
 
     <!-- add a form below the h1 -->
-    <form class="new-task" ng-submit="addTask(newTask); newTask='';">
+    <form class="new-task"
+          ng-submit="addTask(newTask); newTask='';"
+          ng-show="$root.currentUser">
       <input ng-model="newTask" type="text"
              name="text" placeholder="Type to add new tasks" />
     </form>
-- 
2.6.3


From ae6c5d8c37d820c52a1577176a1e46805b67b93a Mon Sep 17 00:00:00 2001
From: Uri Goldshtein <uri.goldshtein@gmail.com>
Date: Sun, 8 Nov 2015 02:56:09 +0200
Subject: [PATCH 26/39] Step 8.7: Add username to the displayed task

---
 simple-todos-angular.html | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/simple-todos-angular.html b/simple-todos-angular.html
index 98c6a82..d12094e 100644
--- a/simple-todos-angular.html
+++ b/simple-todos-angular.html
@@ -32,7 +32,9 @@
 
       <input type="checkbox" ng-model="task.checked" class="toggle-checked" />
 
-      <span class="text">{{task.text}}</span>
+      <span class="text">
+        <strong>{{task.username}}</strong> - {{task.text}}
+      </span>
     </li>
   </ul>
 
-- 
2.6.3


From 3c4ef9646affd3ae74c83dbd0623fc283854fe47 Mon Sep 17 00:00:00 2001
From: Uri Goldshtein <uri.goldshtein@gmail.com>
Date: Sun, 8 Nov 2015 02:56:52 +0200
Subject: [PATCH 27/39] Step 9.1: Remove the insecure package

---
 .meteor/packages | 1 -
 .meteor/versions | 1 -
 2 files changed, 2 deletions(-)

diff --git a/.meteor/packages b/.meteor/packages
index dbee131..2d2e7c5 100644
--- a/.meteor/packages
+++ b/.meteor/packages
@@ -15,7 +15,6 @@ standard-minifiers      # JS/CSS minifiers run for production mode
 es5-shim                # ECMAScript 5 compatibility for older browsers.
 
 autopublish             # Publish all data to the clients (for prototyping)
-insecure                # Allow all DB writes from clients (for prototyping)
 angular@1.2.0-rc.6
 accounts-password
 dotansimha:accounts-ui-angular
diff --git a/.meteor/versions b/.meteor/versions
index cf8e714..fb60917 100644
--- a/.meteor/versions
+++ b/.meteor/versions
@@ -41,7 +41,6 @@ html-tools@1.0.5
 htmljs@1.0.5
 http@1.1.1
 id-map@1.0.4
-insecure@1.0.4
 jquery@1.11.4
 lai:collection-extensions@0.1.4
 launch-screen@1.0.4
-- 
2.6.3


From cbbf8aed7c84eaecbf34b72863945924211728e4 Mon Sep 17 00:00:00 2001
From: Uri Goldshtein <uri.goldshtein@gmail.com>
Date: Sat, 18 Jul 2015 15:02:50 +0300
Subject: [PATCH 28/39] Step 9.2: Add Meteor Methods for add, delete and check
 tasks

---
 simple-todos-angular.js | 22 ++++++++++++++++++++++
 1 file changed, 22 insertions(+)

diff --git a/simple-todos-angular.js b/simple-todos-angular.js
index a83dad1..b10a928 100644
--- a/simple-todos-angular.js
+++ b/simple-todos-angular.js
@@ -47,3 +47,25 @@ if (Meteor.isClient) {
 
     }]);
 }
+
+Meteor.methods({
+  addTask: function (text) {
+    // Make sure the user is logged in before inserting a task
+    if (! Meteor.userId()) {
+      throw new Meteor.Error('not-authorized');
+    }
+
+    Tasks.insert({
+      text: text,
+      createdAt: new Date(),
+      owner: Meteor.userId(),
+      username: Meteor.user().username
+    });
+  },
+  deleteTask: function (taskId) {
+    Tasks.remove(taskId);
+  },
+  setChecked: function (taskId, setChecked) {
+    Tasks.update(taskId, { $set: { checked: setChecked} });
+  }
+});
-- 
2.6.3


From ad3d3157c47260889e135d78213b82ed168ebd7c Mon Sep 17 00:00:00 2001
From: Uri Goldshtein <uri.goldshtein@gmail.com>
Date: Sat, 18 Jul 2015 15:05:25 +0300
Subject: [PATCH 29/39] Step 9.3: Add scope functions to call the Meteor
 methods

---
 simple-todos-angular.js | 17 ++++++++++-------
 1 file changed, 10 insertions(+), 7 deletions(-)

diff --git a/simple-todos-angular.js b/simple-todos-angular.js
index b10a928..417ebd9 100644
--- a/simple-todos-angular.js
+++ b/simple-todos-angular.js
@@ -25,13 +25,16 @@ if (Meteor.isClient) {
         return Tasks.find($scope.getReactively('query'), {sort: {createdAt: -1}})
       });
 
-      $scope.addTask = function(newTask) {
-        $scope.tasks.push( {
-            text: newTask,
-            createdAt: new Date(),             // current time
-            owner: Meteor.userId(),            // _id of logged in user
-            username: Meteor.user().username }  // username of logged in user
-        );
+      $scope.addTask = function (newTask) {
+        $meteor.call('addTask', newTask);
+      };
+
+      $scope.deleteTask = function (task) {
+        $meteor.call('deleteTask', task._id);
+      };
+
+      $scope.setChecked = function (task) {
+        $meteor.call('setChecked', task._id, !task.checked);
       };
 
       $scope.$watch('hideCompleted', function() {
-- 
2.6.3


From 0ed0f945ae39b7974d17ea8d4327e3f1352e12b8 Mon Sep 17 00:00:00 2001
From: Uri Goldshtein <uri.goldshtein@gmail.com>
Date: Sun, 8 Nov 2015 02:57:43 +0200
Subject: [PATCH 30/39] Step 9.4: Change template events to call methods

---
 simple-todos-angular.html | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

diff --git a/simple-todos-angular.html b/simple-todos-angular.html
index d12094e..da9f25b 100644
--- a/simple-todos-angular.html
+++ b/simple-todos-angular.html
@@ -28,9 +28,10 @@
 
   <ul>
     <li ng-repeat="task in tasks" ng-class="{'checked': task.checked}">
-      <button class="delete" ng-click="tasks.remove(task)">&times;</button>
+      <button class="delete" ng-click="deleteTask(task)">&times;</button>
 
-      <input type="checkbox" ng-model="task.checked" class="toggle-checked" />
+      <input type="checkbox" ng-checked="task.checked"
+             ng-click="setChecked(task)" class="toggle-checked" />
 
       <span class="text">
         <strong>{{task.username}}</strong> - {{task.text}}
-- 
2.6.3


From 4be42a7c3a1d418bcf6d5e0f9db3c650c7679cd3 Mon Sep 17 00:00:00 2001
From: Uri Goldshtein <uri.goldshtein@gmail.com>
Date: Sun, 8 Nov 2015 02:58:12 +0200
Subject: [PATCH 31/39] Step 10.1: Remove the autopublish package

---
 .meteor/packages | 1 -
 .meteor/versions | 1 -
 2 files changed, 2 deletions(-)

diff --git a/.meteor/packages b/.meteor/packages
index 2d2e7c5..ed1f118 100644
--- a/.meteor/packages
+++ b/.meteor/packages
@@ -14,7 +14,6 @@ tracker                 # Meteor's client-side reactive programming library
 standard-minifiers      # JS/CSS minifiers run for production mode
 es5-shim                # ECMAScript 5 compatibility for older browsers.
 
-autopublish             # Publish all data to the clients (for prototyping)
 angular@1.2.0-rc.6
 accounts-password
 dotansimha:accounts-ui-angular
diff --git a/.meteor/versions b/.meteor/versions
index fb60917..711e407 100644
--- a/.meteor/versions
+++ b/.meteor/versions
@@ -6,7 +6,6 @@ angular@1.2.0-rc.6
 angular-meteor-data@0.0.4
 angular-templates@0.0.1
 angular:angular@1.4.7
-autopublish@1.0.4
 autoupdate@1.2.4
 babel-compiler@5.8.24_1
 babel-runtime@0.1.4
-- 
2.6.3


From c03a6b73794726ac8a01f8e494527ecaf202e4c3 Mon Sep 17 00:00:00 2001
From: Uri Goldshtein <uri.goldshtein@gmail.com>
Date: Sat, 18 Jul 2015 15:10:25 +0300
Subject: [PATCH 32/39] Step 10.2: Add server publish function to tasks

---
 simple-todos-angular.js | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/simple-todos-angular.js b/simple-todos-angular.js
index 417ebd9..b54fd8f 100644
--- a/simple-todos-angular.js
+++ b/simple-todos-angular.js
@@ -72,3 +72,9 @@ Meteor.methods({
     Tasks.update(taskId, { $set: { checked: setChecked} });
   }
 });
+
+if (Meteor.isServer) {
+  Meteor.publish('tasks', function () {
+    return Tasks.find();
+  });
+}
-- 
2.6.3


From 09976ce1f33a0fc03d28d3655e041d3f7c4dd80e Mon Sep 17 00:00:00 2001
From: Uri Goldshtein <uri.goldshtein@gmail.com>
Date: Sat, 18 Jul 2015 15:11:21 +0300
Subject: [PATCH 33/39] Step 10.3: Subscribe to tasks publication

---
 simple-todos-angular.js | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/simple-todos-angular.js b/simple-todos-angular.js
index b54fd8f..956f7a8 100644
--- a/simple-todos-angular.js
+++ b/simple-todos-angular.js
@@ -21,6 +21,8 @@ if (Meteor.isClient) {
   angular.module('simple-todos').controller('TodosListCtrl', ['$scope', '$meteor',
     function ($scope, $meteor) {
 
+      $scope.$meteorSubscribe('tasks');
+
       $scope.tasks = $meteor.collection(function() {
         return Tasks.find($scope.getReactively('query'), {sort: {createdAt: -1}})
       });
-- 
2.6.3


From acf6073db5f556dc0c5e1c90be38a2041387bf81 Mon Sep 17 00:00:00 2001
From: Uri Goldshtein <uri.goldshtein@gmail.com>
Date: Sun, 8 Nov 2015 02:59:00 +0200
Subject: [PATCH 34/39] Step 10.4: Add setPrivate button to template

---
 simple-todos-angular.html | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/simple-todos-angular.html b/simple-todos-angular.html
index da9f25b..1f44e28 100644
--- a/simple-todos-angular.html
+++ b/simple-todos-angular.html
@@ -33,6 +33,12 @@
       <input type="checkbox" ng-checked="task.checked"
              ng-click="setChecked(task)" class="toggle-checked" />
 
+      <button class="toggle-private"
+              ng-if="task.owner === $root.currentUser._id"
+              ng-click="setPrivate(task)">
+        {{task.private == true ? "Private" : "Public"}}
+      </button>
+
       <span class="text">
         <strong>{{task.username}}</strong> - {{task.text}}
       </span>
-- 
2.6.3


From 2df1dc1276c67d789c09fa0c362874ffbefd03ea Mon Sep 17 00:00:00 2001
From: Uri Goldshtein <uri.goldshtein@gmail.com>
Date: Sun, 8 Nov 2015 02:59:36 +0200
Subject: [PATCH 35/39] Step 10.5: Add private CSS class to task

---
 simple-todos-angular.html | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/simple-todos-angular.html b/simple-todos-angular.html
index 1f44e28..a483115 100644
--- a/simple-todos-angular.html
+++ b/simple-todos-angular.html
@@ -27,7 +27,8 @@
   </header>
 
   <ul>
-    <li ng-repeat="task in tasks" ng-class="{'checked': task.checked}">
+    <li ng-repeat="task in tasks"
+        ng-class="{'checked': task.checked, 'private': task.private}">
       <button class="delete" ng-click="deleteTask(task)">&times;</button>
 
       <input type="checkbox" ng-checked="task.checked"
-- 
2.6.3


From fa1d1964b37212e64aa9cc8ef341f2504b6f13a9 Mon Sep 17 00:00:00 2001
From: Uri Goldshtein <uri.goldshtein@gmail.com>
Date: Sat, 18 Jul 2015 17:06:51 +0300
Subject: [PATCH 36/39] Step 10.6: Add setPrivate Meteor Method

---
 simple-todos-angular.js | 10 ++++++++++
 1 file changed, 10 insertions(+)

diff --git a/simple-todos-angular.js b/simple-todos-angular.js
index 956f7a8..49b4c12 100644
--- a/simple-todos-angular.js
+++ b/simple-todos-angular.js
@@ -72,6 +72,16 @@ Meteor.methods({
   },
   setChecked: function (taskId, setChecked) {
     Tasks.update(taskId, { $set: { checked: setChecked} });
+  },
+  setPrivate: function (taskId, setToPrivate) {
+    var task = Tasks.findOne(taskId);
+
+    // Make sure only the task owner can make a task private
+    if (task.owner !== Meteor.userId()) {
+      throw new Meteor.Error('not-authorized');
+    }
+
+    Tasks.update(taskId, { $set: { private: setToPrivate } });
   }
 });
 
-- 
2.6.3


From 9db2c65e0dd9821bea2fa1a1690a5e1bf2c0a644 Mon Sep 17 00:00:00 2001
From: Uri Goldshtein <uri.goldshtein@gmail.com>
Date: Sat, 18 Jul 2015 17:08:29 +0300
Subject: [PATCH 37/39] Step 10.7: Add setPrivate scope function

---
 simple-todos-angular.js | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/simple-todos-angular.js b/simple-todos-angular.js
index 49b4c12..a89c2dc 100644
--- a/simple-todos-angular.js
+++ b/simple-todos-angular.js
@@ -39,6 +39,10 @@ if (Meteor.isClient) {
         $meteor.call('setChecked', task._id, !task.checked);
       };
 
+      $scope.setPrivate = function (task) {
+        $meteor.call('setPrivate', task._id, ! task.private);
+      };
+
       $scope.$watch('hideCompleted', function() {
         if ($scope.hideCompleted)
           $scope.query = {checked: {$ne: true}};
-- 
2.6.3


From e72d2ec35782e6a00fc41d84687e39ca6404be39 Mon Sep 17 00:00:00 2001
From: Uri Goldshtein <uri.goldshtein@gmail.com>
Date: Sat, 18 Jul 2015 15:59:53 +0300
Subject: [PATCH 38/39] Step 10.8: Publish only public and owner's tasks

---
 simple-todos-angular.js | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

diff --git a/simple-todos-angular.js b/simple-todos-angular.js
index a89c2dc..2b429a3 100644
--- a/simple-todos-angular.js
+++ b/simple-todos-angular.js
@@ -91,6 +91,11 @@ Meteor.methods({
 
 if (Meteor.isServer) {
   Meteor.publish('tasks', function () {
-    return Tasks.find();
+    return Tasks.find({
+      $or: [
+        { private: {$ne: true} },
+        { owner: this.userId }
+      ]
+    });
   });
 }
-- 
2.6.3


From c48994ab0683d2ba1029c7c5a053a7f68a5390bb Mon Sep 17 00:00:00 2001
From: Uri Goldshtein <uri.goldshtein@gmail.com>
Date: Sat, 18 Jul 2015 16:02:20 +0300
Subject: [PATCH 39/39] Step 10.9: Add extra security to methods

---
 simple-todos-angular.js | 12 ++++++++++++
 1 file changed, 12 insertions(+)

diff --git a/simple-todos-angular.js b/simple-todos-angular.js
index 2b429a3..a47bf45 100644
--- a/simple-todos-angular.js
+++ b/simple-todos-angular.js
@@ -72,9 +72,21 @@ Meteor.methods({
     });
   },
   deleteTask: function (taskId) {
+    var task = Tasks.findOne(taskId);
+    if (task.private && task.owner !== Meteor.userId()) {
+      // If the task is private, make sure only the owner can delete it
+      throw new Meteor.Error('not-authorized');
+    }
+
     Tasks.remove(taskId);
   },
   setChecked: function (taskId, setChecked) {
+    var task = Tasks.findOne(taskId);
+    if (task.private && task.owner !== Meteor.userId()) {
+      // If the task is private, make sure only the owner can check it off
+      throw new Meteor.Error('not-authorized');
+    }
+
     Tasks.update(taskId, { $set: { checked: setChecked} });
   },
   setPrivate: function (taskId, setToPrivate) {
-- 
2.6.3

